/* ===== Opening flow ===== */
async function tryPlayOpening(){
  try{ await openingVideo.play(); }
  catch(e){ tapHint.style.display='block'; }
}
['touchstart','pointerdown','click','keydown'].forEach(evt=>{
  window.addEventListener(evt, ()=> openingVideo.play().catch(()=>{}), {once:true, passive:true});
});
openingVideo.addEventListener('ended', ()=>{
  openingLayer.style.display='none';
  state = State.READY;
  start(); // ▶ 正式開始
});
tryPlayOpening();