<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>NeoX ‚Äî End Game</title>
<style>
  html,body{
    margin:0;height:100%;
    background:#070a18;color:#fff;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang TC","Noto Sans",Arial,sans-serif;
    overflow:hidden;
  }
  #wrap{
    position:relative;height:100%;
    display:grid;place-items:center;
    padding:10px;
  }
  .stage{
    position:relative;
    width:min(92vw,900px);
    aspect-ratio:9/16;
    border-radius:16px;
    background:#000;
    box-shadow:0 22px 60px rgba(0,0,0,.45),inset 0 0 0 1px rgba(255,255,255,.07);
    overflow:hidden;
  }
  video{
    position:absolute;inset:0;
    width:100%;height:100%;
    object-fit:contain;
    background:#000;
  }
  .headline{
    position:absolute;left:50%;top:10%;
    transform:translateX(-50%);
    text-align:center;text-shadow:0 6px 22px rgba(0,0,0,.55);
    pointer-events:none;
  }
  .headline h1{
    margin:0 0 8px;
    font-size:clamp(22px,5.2vw,36px);
  }
  .headline p{
    margin:0;color:#cfe0ff;font-weight:700;
  }
  .controls{
    position:absolute;left:50%;
    bottom:calc(8% + env(safe-area-inset-bottom));
    transform:translateX(-50%);
    display:flex;gap:10px;flex-wrap:wrap;justify-content:center;
  }
  button{
    border:0;border-radius:12px;
    padding:12px 18px;color:#fff;
    font-weight:900;cursor:pointer;
    background:#1b2144;
    box-shadow:0 10px 28px rgba(0,0,0,.25);
    transition:all .2s ease;
  }
  button:hover{
    background:#2b36a4;
    transform:scale(1.05);
  }
  button img{
    width:22px;height:22px;
    vertical-align:middle;
    margin-right:6px;
  }
</style>
</head>
<body>
<div id="wrap">
  <div class="stage">
    <video id="endVid" preload="auto" src="https://neoxcoin.github.io/neox-game/Endgameanimation%20.mp4"></video>

    <div class="headline">
      <h1 id="titleText">Victory!</h1>
      <p id="scoreText">Score: 0 ¬∑ Best: 0</p>
    </div>

    <div class="controls">
      <button id="btnPlay">‚ñ∂Ô∏è Play</button>
      <button id="btnReplay">üîÅ Replay</button>
      <button id="btnHome">
        <img src="https://neoxcoin.github.io/neox-game/XNXC.png" alt="NeoX">Home
      </button>
    </div>
  </div>
</div>

<script>
const video = document.getElementById("endVid");
const btnPlay = document.getElementById("btnPlay");
const btnReplay = document.getElementById("btnReplay");
const btnHome = document.getElementById("btnHome");
const scoreText = document.getElementById("scoreText");

// ËÆÄÂèñÂàÜÊï∏ÔºàÂæûÁ∂≤ÂùÄÂèÉÊï∏Êàñ localStorageÔºâ
const params = new URLSearchParams(location.search);
const score = params.get("score") || localStorage.getItem("nx_last_score") || 0;
const best  = params.get("best")  || localStorage.getItem("nx_best_all") || 0;
scoreText.textContent = `Score: ${score} ¬∑ Best: ${best}`;

// ‚ñ∂Ô∏è Play / ‚è∏ Pause ÂàáÊèõ
btnPlay.addEventListener("click", () => {
  if (video.paused) {
    video.play();
    btnPlay.textContent = "‚è∏ Pause";
  } else {
    video.pause();
    btnPlay.textContent = "‚ñ∂Ô∏è Play";
  }
});

// üîÅ Replay
btnReplay.addEventListener("click", () => {
  video.currentTime = 0;
  video.play();
  btnPlay.textContent = "‚è∏ Pause";
});

// üè† Âõû‰∏ªÈ†Å index.html
btnHome.addEventListener("click", () => {
  window.location.href = "index.html";
});

// Êí≠ÂÆåÂæåËá™ÂãïÈ°ØÁ§∫„Äå‚ñ∂Ô∏è Play„Äç
video.addEventListener("ended", () => {
  btnPlay.textContent = "‚ñ∂Ô∏è Play";
});
</script>
</body>
</html>