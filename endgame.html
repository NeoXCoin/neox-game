<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>NeoX â€” End Game</title>
<style>
  html,body{
    margin:0;height:100%;
    background:#070a18;color:#fff;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang TC","Noto Sans",Arial,sans-serif;
    overflow:hidden;
  }
  #wrap{
    position:relative;height:100%;
    display:grid;place-items:center;padding:10px;
  }
  .stage{
    position:relative;
    width:min(92vw,900px);
    aspect-ratio:9/16;
    border-radius:16px;
    background:#000;
    box-shadow:0 22px 60px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.07);
    overflow:hidden;
  }

  /* è¦–é »åœ¨ä¸‹å±¤ */
  video{
    position:absolute; inset:0;
    width:100%; height:100%;
    object-fit:contain;
    background:#000;
    z-index:1;
  }

  /* åº•éƒ¨æ¼¸å±¤ï¼Œä»¤æ£æ›´æ¸…æ¥š */
  .scrim{
    position:absolute; left:0; right:0; bottom:0; height:32%;
    background:linear-gradient(transparent, rgba(5,8,22,.65));
    z-index:2; pointer-events:none;
  }

  .headline{
    position:absolute; left:50%; top:6%;
    transform:translateX(-50%);
    text-align:center; text-shadow:0 6px 22px rgba(0,0,0,.55);
    pointer-events:none; z-index:3;
  }
  .headline h1{ margin:0 0 8px; font-size:clamp(22px,5.2vw,36px); }
  .headline p{ margin:0; color:#cfe0ff; font-weight:700; }

  /* æ§åˆ¶åˆ—ç½®ä¸­ï¼Œå‘ä¸Šæ¨ï¼›ç¢ºä¿åœ¨æœ€ä¸Šå±¤ */
  .controls{
    position:absolute; left:50%;
    bottom:calc(10% + env(safe-area-inset-bottom));
    transform:translateX(-50%);
    display:flex; gap:10px; flex-wrap:wrap; justify-content:center;
    z-index:4;
  }
  button{
    border:0; border-radius:12px; padding:12px 18px;
    color:#fff; font-weight:900; cursor:pointer;
    background:#1b2144;
    box-shadow:0 10px 28px rgba(0,0,0,.25);
    transition:transform .2s ease, background .2s ease;
  }
  button:hover{ background:#2b36a4; transform:scale(1.05); }
  button img{ width:22px; height:22px; vertical-align:middle; margin-right:6px; }

  /* æ©«å‘æ™‚å†æ¨é«˜å°‘å°‘ */
  @media (orientation:landscape){
    .controls{ bottom:calc(14% + env(safe-area-inset-bottom)); }
  }
</style>
</head>
<body>
<div id="wrap">
  <div class="stage">
    <video id="endVid" preload="auto"
      src="https://neoxcoin.github.io/neox-game/Endgameanimation%20.mp4"
      playsinline webkit-playsinline></video>

    <div class="scrim"></div>

    <div class="headline">
      <h1 id="titleText">Victory!</h1>
      <p id="scoreText">Score: 0 Â· Best: 0</p>
    </div>

    <div class="controls">
      <button id="btnPlay">â–¶ï¸ Play</button>
      <button id="btnReplay">ğŸ” Replay</button>
      <button id="btnHome">
        <img src="https://neoxcoin.github.io/neox-game/XNXC.png" alt="NeoX">Home
      </button>
    </div>
  </div>
</div>

<script>
const video = document.getElementById("endVid");
const btnPlay = document.getElementById("btnPlay");
const btnReplay = document.getElementById("btnReplay");
const btnHome = document.getElementById("btnHome");
const scoreText = document.getElementById("scoreText");

// è®€å–åˆ†æ•¸ï¼ˆç¶²å€åƒæ•¸æˆ– localStorageï¼‰
const p = new URLSearchParams(location.search);
const score = p.get("score") ?? localStorage.getItem("nx_last_score") ?? 0;
const best  = p.get("best")  ?? localStorage.getItem("nx_best_all")  ?? 0;
scoreText.textContent = `Score: ${score} Â· Best: ${best}`;

// Play / Pause åˆ‡æ›
btnPlay.addEventListener("click", () => {
  if (video.paused) { video.play(); btnPlay.textContent = "â¸ Pause"; }
  else { video.pause(); btnPlay.textContent = "â–¶ï¸ Play"; }
});

// Replay
btnReplay.addEventListener("click", () => {
  video.currentTime = 0; video.play(); btnPlay.textContent = "â¸ Pause";
});

// å›ä¸»é 
btnHome.addEventListener("click", () => { window.location.href = "index.html"; });

// å½±ç‰‡å®Œçµå¾Œï¼ŒæŒ‰éˆ•æ–‡å­—é‚„åŸ
video.addEventListener("ended", () => { btnPlay.textContent = "â–¶ï¸ Play"; });

// iOS éœ€è¦ä¸€æ¬¡äº’å‹•å…ˆè§£é–æ’­æ”¾
["pointerdown","touchend","click","keydown"].forEach(e =>
  window.addEventListener(e, () => { video.play().then(()=>video.pause()).catch(()=>{}); }, {once:true})
);
</script>
</body>
</html>