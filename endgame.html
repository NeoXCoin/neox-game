<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>NeoX â€” End Game</title>
<style>
  html,body{
    margin:0;height:100%;
    background:#070a18;color:#fff;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang TC","Noto Sans",Arial,sans-serif;
    overflow:hidden;
  }
  #wrap{
    position:relative;height:100%;
    display:grid;place-items:center;padding:10px;
  }
  .stage{
    position:relative;width:min(92vw,900px);aspect-ratio:9/16;border-radius:16px;
    background:#000;overflow:hidden;
    box-shadow:0 22px 60px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.07);
  }
  /* å½±ç‰‡ï¼šç¶­æŒåŸæ¯”ä¾‹ï¼Œä¸æ”¾å¤§è£åˆ‡ */
  video{
    position:absolute;inset:0;width:100%;height:100%;
    object-fit:contain;background:#000;
  }

  /* é ‚éƒ¨æ¨™é¡Œ */
  .headline{
    position:absolute;left:50%;top:8%;
    transform:translateX(-50%);text-align:center;
    text-shadow:0 6px 22px rgba(0,0,0,.55);pointer-events:none;
  }
  .headline h1{margin:0 0 8px;font-size:clamp(22px,5.2vw,36px);}
  .headline p{margin:0;color:#cfe0ff;font-weight:700;}

  /* åº•éƒ¨æŒ‰éˆ•ï¼šæé«˜ä¸€é»ï¼Œé¿å…è¢«å·¥å…·æ¢é®æ“‹ */
  .controlsWrap{
    position:absolute;left:0;right:0;bottom:0;pointer-events:none;
    background:linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(7,10,24,.75) 38%, rgba(7,10,24,.85) 100%);
    padding-bottom:clamp(10px, 6%, calc(16px + env(safe-area-inset-bottom)));
    padding-top:18%;
    display:flex;justify-content:center;
  }
  .controls{
    pointer-events:auto;
    display:flex;gap:10px;flex-wrap:wrap;justify-content:center;
    transform:translateY(6%); /* å¾®å¾®ä¸Šæ */
  }
  button{
    border:0;border-radius:12px;padding:12px 18px;color:#fff;font-weight:900;cursor:pointer;
    background:#1b2144;box-shadow:0 10px 28px rgba(0,0,0,.25);transition:all .2s ease;
  }
  button:hover{background:#2b36a4;transform:translateY(-1px);}
  button img{width:22px;height:22px;vertical-align:middle;margin-right:6px}
</style>
</head>
<body>
<div id="wrap">
  <div class="stage">
    <video id="endVid" preload="auto"
           playsinline webkit-playsinline
           src="https://neoxcoin.github.io/neox-game/Endgameanimation%20.mp4"></video>

    <div class="headline">
      <h1 id="titleText">Victory!</h1>
      <p id="scoreText">Score: 0 Â· Best: 0</p>
    </div>

    <!-- åº•éƒ¨æ¼¸è®Š + æ§åˆ¶éµå€ -->
    <div class="controlsWrap">
      <div class="controls">
        <button id="btnPlay">â–¶ï¸ Play</button>
        <button id="btnReplay">ğŸ” Replay</button>
        <button id="btnHome">
          <img src="https://neoxcoin.github.io/neox-game/XNXC.png" alt="NeoX">Home
        </button>
      </div>
    </div>
  </div>
</div>

<script>
const video = document.getElementById("endVid");
const btnPlay = document.getElementById("btnPlay");
const btnReplay = document.getElementById("btnReplay");
const btnHome = document.getElementById("btnHome");
const scoreText = document.getElementById("scoreText");

// è®€å–åˆ†æ•¸ï¼ˆURL åƒæ•¸å„ªå…ˆï¼Œå¦å‰‡ç”¨ä¸Šæ¬¡ localStorageï¼‰
const params = new URLSearchParams(location.search);
const score = params.get("score") || localStorage.getItem("nx_last_score") || 0;
const best  = params.get("best")  || localStorage.getItem("nx_best_all")  || 0;
scoreText.textContent = `Score: ${score} Â· Best: ${best}`;

// â–¶ï¸/â¸ åˆ‡æ›
function syncPlayButton(){
  btnPlay.textContent = video.paused ? "â–¶ï¸ Play" : "â¸ Pause";
}
btnPlay.addEventListener("click", ()=>{ video.paused ? video.play() : video.pause(); syncPlayButton(); });
btnReplay.addEventListener("click", ()=>{ video.currentTime = 0; video.play(); syncPlayButton(); });
btnHome.addEventListener("click", ()=>{ window.location.href = "index.html"; });

video.addEventListener("play",  syncPlayButton);
video.addEventListener("pause", syncPlayButton);
video.addEventListener("ended", syncPlayButton);

// éµç›¤å¿«æ·ï¼šSpace åˆ‡æ›ã€R é‡æ’­
addEventListener("keydown",(e)=>{
  if(e.code==="Space"){ e.preventDefault(); video.paused ? video.play() : video.pause(); syncPlayButton(); }
  if(e.key.toLowerCase()==="r"){ video.currentTime=0; video.play(); syncPlayButton(); }
});
</script>
</body>
</html>