<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>NeoX Treasure â€“ Start</title>
<style>
  :root{ --bg:#060a1a; --panel:#0b1030; --brand:#2b7cff; }
  html,body{margin:0;height:100%;background:var(--bg);color:#fff;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"PingFang TC","Noto Sans TC"}
  .shell{position:fixed;inset:0;overflow:hidden;padding-bottom:env(safe-area-inset-bottom)}
  /* é¦–å±ï¼ˆä»‹ç´¹ + æ’­ç‰‡ï¼‰ */
  #home{position:absolute;inset:0;display:grid;place-items:center;padding:clamp(16px,3vw,32px)}
  .card{max-width:min(900px,92vw);background:rgba(255,255,255,.04);border-radius:16px;
        box-shadow:0 24px 80px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.06);
        padding:clamp(16px,3.2vw,28px);backdrop-filter:blur(6px)}
  h1{margin:.2em 0 .4em;font-size:clamp(22px,5.4vw,36px);letter-spacing:.02em}
  p{margin:.4em 0 1em;color:#cfe0ff;line-height:1.7}
  .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}
  button{border:0;border-radius:12px;padding:12px 16px;font-weight:800;cursor:pointer}
  .primary{background:var(--brand);color:#fff;box-shadow:0 12px 28px rgba(43,124,255,.45)}
  .ghost{background:#151a3a;color:#e6ecff;box-shadow:inset 0 0 0 1px rgba(255,255,255,.08)}
  small{opacity:.7}
  /* å½±ç‰‡è¦†è“‹å±¤ */
  #opener{position:absolute;inset:0;display:none;align-items:center;justify-content:center;background:#000;z-index:10}
  #opener video{width:100%;height:100%;object-fit:cover}
  #tap{position:absolute;inset:auto 0 8% 0;text-align:center;color:#fff;opacity:.85;display:none}
  /* çœŸæ­£éŠæˆ²å€ï¼ˆiframe å…¨å±ï¼‰ */
  #stage{position:absolute;inset:0;display:none}
  iframe{position:absolute;inset:0;width:100%;height:100%;border:0;background:#000}
  .credit{position:fixed;left:12px;bottom:calc(10px + env(safe-area-inset-bottom));opacity:.55;font-size:12px}
</style>
</head>
<body>
<div class="shell">
  <!-- é¦–é ï¼šä»‹ç´¹ + å‹•ç•«æŒ‰éˆ• -->
  <section id="home" aria-label="Game intro">
    <div class="card">
      <h1>NeoX Catch the Coins</h1>
      <p>
        ç”¨åº•éƒ¨çš„æ‰˜ç›¤æ¥ä½æ‰ä¸‹ä¾†çš„ <b>NeoX Coins</b>ï¼Œä¸åŒç¡¬å¹£åˆ†æ•¸ä¸åŒï¼Œæ¼æ¥æˆ–æ¥åˆ°å‡å¹£æœƒæ‰£åˆ†ã€‚<br>
        å®Œæˆç›®æ¨™æ•¸é‡å³å¯å‡ç´šï¼Œé€£çºŒå‘½ä¸­å¯è¡é«˜åˆ†æ•¸ï¼æ”¯æ´æ‰‹æ©Ÿè§¸æ§åŒéµç›¤æ“ä½œã€‚
      </p>
      <ul>
        <li>ğŸ¯ ç›®æ¨™ï¼šå®Œæˆæ¯é—œæŒ‡å®šæ•¸é‡</li>
        <li>ğŸ•¹ï¸ æ“ä½œï¼šå·¦å³é»æŒ‰ï¼æ‹–æ›³ï¼Œæˆ–éµç›¤ â† â†’</li>
        <li>ğŸ”Š å¯é–‹é—œéŸ³æ•ˆ</li>
      </ul>
      <div class="btns">
        <button id="btnPlayOpener" class="ghost">â–¶ æ’­æ”¾é–‹å ´å‹•ç•«</button>
        <button id="btnStartGame" class="primary">Start Game</button>
      </div>
      <small>æç¤ºï¼šå…ˆçœ‹é–‹å ´å‹•ç•«ï¼Œå†é–‹å§‹éŠæˆ²æ›´æœ‰ä»£å…¥æ„Ÿã€‚</small>
    </div>
  </section>

  <!-- é–‹å ´å‹•ç•«å±¤ -->
  <div id="opener" role="dialog" aria-label="Opening animation">
    <video id="openerVideo" playsinline preload="auto"
           src="NeoXcatchgameOpening%20.mp4"></video>
    <div id="tap">é»æ“Šä»¥æ’­æ”¾ / ç¹¼çºŒ</div>
  </div>

  <!-- éŠæˆ²å®¹å™¨ -->
  <section id="stage" aria-hidden="true">
    <iframe id="gameFrame" src="about:blank" allow="autoplay; fullscreen"></iframe>
  </section>

  <div class="credit">Â© NeoX</div>
</div>

<script>
const home   = document.getElementById('home');
const opener = document.getElementById('opener');
const video  = document.getElementById('openerVideo');
const tap    = document.getElementById('tap');
const stage  = document.getElementById('stage');
const frame  = document.getElementById('gameFrame');

// 1) æ’­æ”¾é–‹å ´å‹•ç•«
document.getElementById('btnPlayOpener').onclick = async()=>{
  opener.style.display='flex';
  tap.style.display='none';
  try{
    // ç›¡é‡è‡ªå‹•æ’­æ”¾ï¼ˆiOS å¯èƒ½éœ€è¦äº’å‹•ï¼‰
    await video.play();
  }catch{
    tap.style.display='block';
  }
};
// ä½¿ç”¨è€…é»æ“Šå½±ç‰‡å±¤æ™‚ä¹Ÿå˜—è©¦æ’­æ”¾/ç¹¼çºŒ
opener.addEventListener('click', async()=>{
  if(video.paused) { try{ await video.play(); tap.style.display='none'; }catch{} }
});

// å½±ç‰‡æ’­å®Œ â†’ é¡¯ç¤º Start Game æŒ‰éˆ•è®ŠåŒ– & æ”¶èµ·å½±ç‰‡å±¤
video.addEventListener('ended', ()=>{
  opener.style.display='none';
});

// 2) é€²å…¥éŠæˆ² v1
function enterGame(){
  home.style.display='none';
  opener.style.display='none';
  stage.style.display='block';
  frame.src = 'v1.html';
}
document.getElementById('btnStartGame').onclick = enterGame;

// 3) å¾ŒçºŒåˆ‡é—œï¼ˆä¿æŒåŸæœ‰ postMessage æºé€šï¼‰
let level=1,total=0;
window.addEventListener('message',(e)=>{
  const m=e.data||{};
  if(m.type==='levelComplete'){
    total += (m.levelScore||0);
    level++;
    if(level===2) frame.src='v2.html';
    else if(level===3) frame.src='v3.html';
    else {
      // å¯åœ¨æ­¤åŠ å…¥ End Game å½±ç‰‡æˆ–å‹åˆ©ç•«é¢
    }
  }
});
</script>
</body>
</html>