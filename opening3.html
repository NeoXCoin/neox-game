 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>NeoX Catch â€” Opening 3</title>
<style>
  :root{
    --gap:12px;
    --pad:12px 14px;
    --glass: rgba(10,12,20,.82);
    --primary:#2b7cff;
    --text:#fff;
  }
  html,body{
    margin:0; height:100%; overflow:hidden;
    background:#000; color:var(--text);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,"PingFang TC","Noto Sans",Arial,sans-serif;
  }
  #wrap{
    position:fixed; inset:0;
    display:grid; place-items:center;
    background:#000;  /* èƒŒæ™¯ä¿éšªï¼Œä¸æœƒå‡ºé»‘å±é–ƒçˆ */
  }

  /* å½±ç‰‡ä¿æŒåŸæ¯”ä¾‹ï¼Œä¸è£åˆ‡ã€ä¸æ”¾å¤§ */
  video{
    width:100%; height:100%;
    object-fit:contain;              /* é‡é»ï¼šä¿æŒæ¯”ä¾‹ */
    background:#000;                 /* æ²’è¼‰å…¥æ™‚ä¿æŒé»‘åº• */
    opacity:0; transition:opacity .5s ease;
  }

  /* åº•éƒ¨æ¨™é¡Œï¼‹æŒ‰éˆ• */
  .overlay{
    position:absolute; inset:0; display:flex; flex-direction:column;
    justify-content:flex-end; align-items:center; text-align:center;
    background:linear-gradient(transparent 60%, rgba(0,0,0,.65));
    padding:0 16px calc(18px + env(safe-area-inset-bottom));
    pointer-events:none; /* è®“è¦–é »å¯é»ï¼›ä¸‹é¢ row å†é–‹å•Ÿäº‹ä»¶ */
  }
  h1{ margin:0 0 8px; font-size:clamp(22px,5.8vw,34px); font-weight:900; }
  p{  margin:0 0 14px; color:#cfe0ff; font-size:clamp(13px,3.6vw,16px); }

  .row{
    display:flex; gap:var(--gap); flex-wrap:wrap; justify-content:center;
    pointer-events:auto;
  }
  button{
    border:0; border-radius:12px; padding:var(--pad);
    font-weight:800; color:#fff; cursor:pointer;
    background:var(--glass);
    box-shadow:0 8px 22px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.08);
  }
  .primary{ background:var(--primary); }

  /* ç›´å‘ï¼šå…©å€‹/ä¸‰å€‹æŒ‰éˆ•åœ¨åŒä¸€è¡Œç½®ä¸­ */
  @media (orientation:portrait){
    .row{ flex-direction:row; gap:12px; }
  }
  /* æ©«å‘ï¼šåŒæ¨£æ©«æ’ï¼Œä½†å¾€ä¸‹è²¼è¿‘å®‰å…¨å€ */
  @media (orientation:landscape){
    .row{ flex-direction:row; gap:14px; }
  }
</style>
</head>
<body>
<div id="wrap">
  <video id="opener"
    src="https://neoxcoin.github.io/neox-game/TreasureL3Opening.mp4"
    poster="TreasureL2.png"
    preload="auto" muted playsinline webkit-playsinline>
  </video>

  <div class="overlay" aria-hidden="true">
    <h1>Treasure Journey</h1>
    <p>Watch the short opening, or skip and start the level.</p>
    <div class="row">
      <button id="btnSound">ğŸ”ˆ Play with sound</button>
      <button id="btnStart" class="primary">â–¶ Start Play</button>
      <button id="btnSkip">â­ Skip</button>
    </div>
  </div>
</div>

<script>
const video = document.getElementById('opener');
const btnSound = document.getElementById('btnSound');
const btnStart = document.getElementById('btnStart');
const btnSkip  = document.getElementById('btnSkip');

function goGame(){
  try{ video.pause(); }catch(e){}
  localStorage.setItem('seenOpening3','1');
  location.href = 'v3.html';
}

/* iOS é»‘å±ï¼éœéŸ³ç­–ç•¥ï¼šé¦–æ¬¡è§¸æ§å°±å˜—è©¦æ’­æ”¾ç¬¬ä¸€å¹€ï¼ˆä»ä¿æŒ mutedï¼‰ */
['touchstart','pointerdown','click'].forEach(evt=>{
  window.addEventListener(evt, ()=>{ video.play().catch(()=>{}); }, {once:true,passive:true});
});

/* è¼‰å…¥å¾Œæ·¡å…¥ */
video.addEventListener('playing', ()=>{ video.style.opacity='1'; });
video.addEventListener('loadedmetadata', ()=>{ fitContain(); });
addEventListener('resize', fitContain, {passive:true});

/* ä¾æ¯”ä¾‹å¾®èª¿ï¼ˆä¿éšªï¼Œèˆ‡ contain é…åˆï¼‰ */
function fitContain(){
  const r = (video.videoWidth||16)/(video.videoHeight||9);
  const s = innerWidth/innerHeight;
  // æ¥è¿‘æ•´å±æ‰ç”¨ coverï¼Œå…¶é¤˜ç”¨ containï¼ˆä½ èªªè¦ä¿æŒåŸæ¯”ä¾‹ï¼Œæ‰€ä»¥åŸºæœ¬ç”¨ containï¼‰
  video.style.objectFit = Math.abs(r - s) < 0.12 ? 'contain' : 'contain';
}

/* æ§åˆ¶éµ */
btnStart.addEventListener('click', ()=>{ video.play().catch(()=>{}); });
btnSound.addEventListener('click', async ()=>{
  try{
    if (video.paused) await video.play();
    video.muted = false;
    btnSound.textContent = 'ğŸ”Š Sound on';
    btnSound.disabled = true;
  }catch(e){}
});
btnSkip.addEventListener('click', goGame);

/* çµæŸè‡ªå‹•å…¥é—œ */
video.addEventListener('ended', goGame);
</script>
</body>
</html>
