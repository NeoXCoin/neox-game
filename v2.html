<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>NeoX Catch â€” Opening 2</title>
<style>
  :root{ --max:700px; }

  html,body{
    margin:0;height:100%;background:#0a0b1f;color:#fff;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang TC","Noto Sans",Arial,sans-serif;
    overflow:hidden;
  }
  /* ç½®ä¸­ç‰ˆå¿ƒ */
  #wrap{height:100%;display:grid;place-items:center;padding:16px;}

  /* æ­£æ–¹å½¢èˆå°ï¼ˆ1:1ï¼‰ */
  .stage{
    width:min(92vmin,var(--max));
    aspect-ratio:1/1;
    border-radius:16px;
    background:#000;
    box-shadow:0 20px 60px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.06);
    overflow:hidden; position:relative;
  }
  .stage video{
    width:100%;height:100%;
    object-fit:contain;          /* ä¿æŒæ¯”ä¾‹ã€ä¸è£åˆ‡ */
    background:#000;
  }

  /* ç›´å‘ï¼šæ¨™é¡Œï¼‹æ£ æ”¾ã€Œèˆå°ä¸‹é¢ã€ */
  .panel{
    width:min(92vmin,var(--max));
    text-align:center;
    margin-top:12px;
  }
  .title{margin:6px 0 8px;font-weight:800;font-size:clamp(18px,5.2vw,28px)}
  .sub{margin:0 0 10px;color:#cfd6ff;font-size:14px}
  .row{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
  button{
    border:0;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer;color:#fff;
    background:#1b2144; box-shadow:0 10px 28px rgba(0,0,0,.3), inset 0 0 0 1px rgba(255,255,255,.08);
  }
  .primary{ background:#2b7cff; }

  /* æ©«å‘ï¼šæŠŠ panel æ”¶è¿”å…¥å»èˆå°åº•éƒ¨è¦†è“‹ */
  @media (orientation:landscape){
    .stage{ width:min(80vmin,var(--max)); }
    .panel{
      position:absolute; inset:auto 0 0 0; margin:0; padding:12px;
      background:linear-gradient(transparent 30%, rgba(0,0,0,.65));
    }
  }
</style>
</head>
<body>
  <div id="wrap">
    <!-- 1:1 å½±ç‰‡èˆå° -->
    <div class="stage" id="stage">
      <video id="introVideo"
        src="https://neoxcoin.github.io/neox-game/CatchCoinL2.mp4"
        poster="TreasureL2.png"
        preload="auto" muted playsinline webkit-playsinline>
      </video>

      <!-- æ©«å‘æ™‚æœƒè¦†è“‹ï¼›ç›´å‘æ™‚æœƒè½åˆ°èˆå°ä¸‹é‚Šï¼ˆè¦‹ CSSï¼‰ -->
      <div class="panel" id="panel">
        <h1 class="title">Treasure Journey</h1>
        <p class="sub">Watch the short opening, or skip and start the level.</p>
        <div class="row">
          <button id="btnSound">ğŸ”ˆ Sound on</button>
          <button id="btnStart" class="primary">â–¶ Start Play</button>
          <button id="btnSkip">â­ Skip</button>
        </div>
      </div>
    </div>
  </div>

<script>
const video    = document.getElementById('introVideo');
const btnSound = document.getElementById('btnSound');
const btnStart = document.getElementById('btnStart');
const btnSkip  = document.getElementById('btnSkip');

let soundEnabled=false, audioCtx=null;
function ensureAudio(){ if(!audioCtx){ audioCtx=new (window.AudioContext||window.webkitAudioContext)(); }}

/* iPhone é»‘å±å°ç­–ï¼šé¦–æ¬¡è§¸ç¢°å³åˆ»è§£é–åª’é«”é€šé“ï¼Œé¡¯ç¤ºç¬¬ä¸€å¹€ */
window.addEventListener('touchstart', ()=>{
  video.play().then(()=>video.pause()).catch(()=>{});
}, {once:true});

/* æ§åˆ¶éµ */
btnSound.onclick = async ()=>{
  ensureAudio(); soundEnabled=!soundEnabled;
  try{ await audioCtx.resume(); }catch(e){}
  video.muted = !soundEnabled;
  btnSound.textContent = soundEnabled ? 'ğŸ”Š Sound on' : 'ğŸ”ˆ Sound off';
};
btnStart.onclick = ()=>{ video.play().catch(()=>{}); };
btnSkip.onclick  = ()=>{ location.href='v2.html'; };
video.addEventListener('ended', ()=>{ location.href='v2.html'; });

/* åŒä½  index.html ä¸€æ¨£ï¼šæŒ‰ä¸€æ¬¡ä»»ä½•éµéƒ½å˜—è©¦é–‹æ’­ï¼Œä¿éšª */
['pointerdown','click','keydown'].forEach(evt=>{
  window.addEventListener(evt, ()=>{ if(video.paused) video.play().catch(()=>{}); }, {once:true, passive:true});
});
</script>
</body>
</html>