<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>NeoX Catch ‚Äì Level 1</title>
<style>
  html, body {
    height:100%; margin:0; background:#05081A; color:#fff;
    font-family:-apple-system,system-ui,"Segoe UI",Roboto,"Noto Sans",Arial,sans-serif;
    overflow:hidden;
  }
  #wrap{ position:relative; height:100%; display:grid; place-items:center; }
  canvas{
    display:block; width:min(92vw, 820px); aspect-ratio:9/16;
    border-radius:16px; background:#0a0c22;
    box-shadow:0 20px 60px rgba(0,0,0,.45),inset 0 0 0 1px rgba(255,255,255,.06);
    touch-action:none;
  }
  .hud{ position:absolute; inset:0; display:grid; grid-template-rows:auto 1fr auto; pointer-events:none;}
  .topbar{ display:flex; justify-content:space-between; align-items:center; gap:10px; padding:10px 14px; font-weight:800;}
  .badges{ display:flex; gap:8px; flex-wrap:wrap;}
  .badge{ padding:6px 10px; border-radius:10px; background:rgba(0,0,0,.35); box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);}
  button{ pointer-events:auto; border:0; border-radius:10px; padding:8px 12px; font-weight:800; background:#2b7cff; color:#fff; cursor:pointer; box-shadow:0 6px 18px rgba(43,124,255,.35); }
  button.alt{ background:#1f2648; box-shadow:inset 0 0 0 1px rgba(255,255,255,.08); }

  .center{ display:grid; place-items:center; padding:10px;}
  .panel{ pointer-events:auto; min-width:clamp(240px,80%,520px); text-align:center; padding:18px 16px 20px; border-radius:14px; background:rgba(10,12,34,.88); box-shadow:0 20px 60px rgba(0,0,0,.5),inset 0 0 0 1px rgba(255,255,255,.06); backdrop-filter:blur(4px);}
  .panel h1{ margin:8px 0 6px; font-size:clamp(20px,4.8vw,28px);}
  .panel p{ margin:6px 0 14px; color:#b9c1ff; font-size:14px; line-height:1.5;}
  .panel .row{ display:flex; justify-content:center; gap:10px; flex-wrap:wrap;}
  .hidden{ display:none !important; }
</style>
</head>
<body>
<div id="wrap">
  <canvas id="game" width="450" height="800"></canvas>

  <div class="hud">
    <div class="topbar">
      <div class="badges">
        <div class="badge" id="scoreBadge">Score: 0</div>
        <div class="badge" id="progressBadge">Progress: 0 / 10</div>
        <div class="badge" id="bestBadge">Best: 0</div>
      </div>
      <div>
        <button id="btnSound" class="alt">üîä Sound</button>
        <button id="btnPause" class="alt">‚è∏ Pause</button>
        <button id="btnRestart">üîÑ Restart</button>
      </div>
    </div>

    <div class="center">
      <div id="panelStart" class="panel">
        <h1>NeoX Catch ‚Äî Level 1</h1>
        <p>Move the tray to catch dropping <b>NeoX Coins</b> üü°.<br>Reach the target to level up.</p>
        <div class="row"><button id="btnStart">‚ñ∂ Start</button></div>
      </div>

      <div id="panelPause" class="panel hidden">
        <h1>Paused</h1>
        <div class="row">
          <button id="btnResume">‚èµ Resume</button>
          <button id="btnRestart2" class="alt">üîÑ Restart</button>
        </div>
      </div>

      <div id="panelWin" class="panel hidden">
        <h1>Level 1 Clear üéâ</h1>
        <p><span id="finalScore">Score: 0</span></p>
        <div class="row">
          <button id="btnNext">Next Level ‚ñ∂</button>
          <button id="btnReplay" class="alt">üîÅ Replay</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const canvas=document.getElementById('game'),ctx=canvas.getContext('2d');
const coinImg=new Image(); coinImg.src='https://neoxcoin.github.io/neox-emoji-128.png';

function fitHiDPI(){const cssW=canvas.clientWidth,cssH=canvas.clientHeight,dpr=Math.max(1,Math.min(devicePixelRatio||1,2));if(canvas.width!==Math.round(cssW*dpr)){canvas.width=Math.round(cssW*dpr);canvas.height=Math.round(cssH*dpr);}ctx.setTransform(dpr,0,0,dpr,0,0);}
fitHiDPI(); addEventListener('resize',fitHiDPI);

const State={READY:0,PLAYING:1,PAUSED:2,WIN:3}; let state=State.READY;
let score=0,best=0,target=10,caught=0;
const coins=[]; const bowl={x:225,y:760,w:110,h:18,vx:0,speed:6};

function rand(a,b){return Math.random()*(b-a)+a;}
function clamp(v,a,b){return Math.max(a,Math.min(b,v));}
function show(el,s=true){el.classList.toggle('hidden',!s);}
function refreshHUD(){document.getElementById('scoreBadge').textContent=`Score: ${score}`;document.getElementById('progressBadge').textContent=`Progress: ${caught} / ${target}`;document.getElementById('bestBadge').textContent=`Best: ${best}`;}

function start(){state=State.PLAYING;score=0;caught=0;coins.length=0;show(panelStart,false);show(panelPause,false);show(panelWin,false);}
function pause(){state=State.PAUSED;show(panelPause,true);}
function resume(){state=State.PLAYING;show(panelPause,false);}
function win(){state=State.WIN;show(panelWin,true);}
function restart(){start();}

document.getElementById('btnStart').onclick=start;
document.getElementById('btnPause').onclick=pause;
document.getElementById('btnResume').onclick=resume;
document.getElementById('btnRestart').onclick=restart;
document.getElementById('btnRestart2').onclick=restart;
document.getElementById('btnReplay').onclick=restart;
document.getElementById('btnNext').onclick=()=>location.href='v2.html';

let pointerX=null;
canvas.addEventListener('pointerdown',e=>{if(state===State.READY)start();pointerX=e.clientX;});
canvas.addEventListener('pointermove',e=>{if(pointerX===null)return;const dx=e.clientX-pointerX;bowl.x=clamp(bowl.x+dx*0.5,bowl.w/2,canvas.clientWidth-bowl.w/2);pointerX=e.clientX;});
canvas.addEventListener('pointerup',()=>pointerX=null);

let spawn=0,last=performance.now();
function loop(now){
  requestAnimationFrame(loop);
  const dt=Math.min(50,now-last)/16.6667; last=now;
  ctx.fillStyle="#05081A"; ctx.fillRect(0,0,canvas.clientWidth,canvas.clientHeight);

  if(state===State.PLAYING){
    spawn-=dt;
    if(spawn<=0){coins.push({x:rand(20,canvas.clientWidth-20),y:-20,vy:rand(3,5)});spawn=rand(0.5,1);}
    for(let i=coins.length-1;i>=0;i--){
      const c=coins[i]; c.y+=c.vy*dt;
      if(Math.abs(c.x-bowl.x)<bowl.w/2 && Math.abs(c.y-bowl.y)<20){
        coins.splice(i,1); score+=10; caught++; if(caught>=target)win();
      }else if(c.y>canvas.clientHeight+20)coins.splice(i,1);
    }
    refreshHUD();
  }

  // Draw coins
  for(const c of coins){const r=14;ctx.drawImage(coinImg,c.x-r,c.y-r,r*2,r*2);}
  // Draw bowl
  ctx.fillStyle='#2b7cff'; ctx.fillRect(bowl.x-bowl.w/2,bowl.y,bowl.w,10);
}
requestAnimationFrame(loop);
</script>
</body>
</html>