<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>NeoX Catch ‚Äì Level 1</title>
<style>
  html, body {
    height:100%; margin:0; background:#05081A; color:#fff;
    font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans",Arial,sans-serif;
    overflow:hidden;
  }
  #wrap{ position:relative; height:100%; display:grid; place-items:center; }
  canvas{
    display:block; width:min(92vw, 820px); aspect-ratio:9/16; height:auto;
    border-radius:16px; background:#0a0c22;
    box-shadow:0 20px 60px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.06);
    touch-action:none;
  }
  .hud{ position:absolute; inset:0; display:grid; grid-template-rows:auto 1fr auto; pointer-events:none;}
  .topbar{ display:flex; justify-content:space-between; align-items:center; gap:10px; padding:10px 14px; font-weight:800;}
  .badges{ display:flex; gap:8px; flex-wrap:wrap;}
  .badge{ padding:6px 10px; border-radius:10px; background:rgba(0,0,0,.35); box-shadow:inset 0 0 0 1px rgba(255,255,255,.08);}
  .buttons{ display:flex; gap:8px; }
  button{ pointer-events:auto; border:0; border-radius:10px; padding:8px 12px; font-weight:800; background:#2b7cff; color:#fff; cursor:pointer; box-shadow:0 6px 18px rgba(43,124,255,.35); }
  button.alt{ background:#1f2648; box-shadow:inset 0 0 0 1px rgba(255,255,255,.08); }

  /* ÊâãÊ©üÁâàÂè≥‰∏äËßíÊîπÁÇ∫ ‚ãØMenu */
  #btnMore{ display:none; pointer-events:auto; border:0; border-radius:10px; padding:8px 12px; font-weight:800; background:#1f2648; color:#fff; }
  @media (hover:none),(max-width:820px){
    .buttons{ display:none; }
    #btnMore{ display:inline-block; }
  }

  .center{ display:grid; place-items:center; padding:10px;}
  .panel{ pointer-events:auto; min-width:clamp(240px,80%,520px); text-align:center; padding:18px 16px 20px; border-radius:14px; background:rgba(10,12,34,.88); box-shadow:0 20px 60px rgba(0,0,0,.5), inset 0 0 0 1px rgba(255,255,255,.06); backdrop-filter:blur(4px); }
  .panel h1{ margin:8px 0 6px; font-size:clamp(20px,4.8vw,28px); }
  .panel p{ margin:6px 0 14px; color:#b9c1ff; font-size:14px; line-height:1.5;}
  .panel .row{ display:flex; justify-content:center; gap:10px; flex-wrap:wrap;}
  .hidden{ display:none !important; }

  .level-banner{ position:absolute; left:50%; top:60px; transform:translateX(-50%); background:rgba(0,0,0,.35); border-radius:999px; padding:8px 14px; font-weight:900; letter-spacing:.3px; pointer-events:none; }
</style>
</head>
<body>
<div id="wrap">
  <canvas id="game" width="450" height="800"></canvas>

  <div class="hud">
    <div class="topbar">
      <div class="badges">
        <div class="badge" id="scoreBadge">Score: 0</div>
        <div class="badge hidden" id="levelBadge">Level 1 / 5</div>
        <div class="badge" id="progressBadge">Progress: 0 / 10</div>
      </div>
      <div>
        <div class="buttons">
          <a class="alt" href="index.html" style="text-decoration:none;padding:8px 12px;border-radius:10px;">üè† Home</a>
          <button id="btnSound" class="alt">üîä Sound</button>
          <button id="btnPause" class="alt">‚è∏ Pause</button>
          <button id="btnRestart">üîÑ Restart</button>
        </div>
        <button id="btnMore" class="alt">‚ãØ</button>
      </div>
    </div>

    <div class="center">
      <div id="panelStart" class="panel">
        <h1>NeoX Catch ‚Äî Level 1</h1>
        <p>Catch the falling <b>NeoX Coins</b> üü° to score.<br>Reach the goal to unlock next level!</p>
        <div class="row"><button id="btnStart">‚ñ∂ Start</button></div>
      </div>

      <div id="panelPause" class="panel hidden">
        <h1>Paused</h1>
        <div class="row">
          <button id="btnResume">‚èµ Resume</button>
          <button id="btnRestart2" class="alt">üîÑ Restart</button>
        </div>
      </div>

      <div id="panelWin" class="panel hidden">
        <h1>Level 1 Clear üéâ</h1>
        <p><span id="finalScore">Score: 0</span></p>
        <div class="row">
          <button id="btnNext">Next Level ‚ñ∂</button>
          <button id="btnReplay" class="alt">üîÅ Replay Level 1</button>
        </div>
      </div>
    </div>

    <div class="level-banner hidden" id="levelBanner">LEVEL 1</div>
  </div>
</div>

<script>
const canvas=document.getElementById('game'),ctx=canvas.getContext('2d');
function fitHiDPI(){const cssW=canvas.clientWidth,cssH=canvas.clientHeight,dpr=Math.max(1,Math.min(devicePixelRatio||1,2));if(canvas.width!==Math.round(cssW*dpr)){canvas.width=Math.round(cssW*dpr);canvas.height=Math.round(cssH*dpr);}ctx.setTransform(dpr,0,0,dpr,0,0);}fitHiDPI();addEventListener('resize',fitHiDPI);
function visibleCanvasHeight(){const rect=canvas.getBoundingClientRect();const vp=window.visualViewport;if(vp){const visibleBottom=(vp.offsetTop||0)+vp.height;return Math.max(0,Math.min(rect.bottom,visibleBottom)-rect.top);}return rect.height;}

const State={READY:0,PLAYING:1,PAUSED:2,WIN:3};let state=State.READY;
const scoreBadge=document.getElementById('scoreBadge');const levelBadge=document.getElementById('levelBadge');const progressBadge=document.getElementById('progressBadge');
const panelStart=document.getElementById('panelStart');const panelPause=document.getElementById('panelPause');const panelWin=document.getElementById('panelWin');
const finalScore=document.getElementById('finalScore');const levelBanner=document.getElementById('levelBanner');
const bowl={x:225,y:760,w:110,h:16,speed:6.2,vx:0};

let score=0,caught=0,target=15;
function refreshHUD(){scoreBadge.textContent=`Score: ${Math.floor(score)}`;progressBadge.textContent=`Progress: ${caught} / ${target}`;levelBadge.classList.toggle('hidden',score<100);}
function show(el,s=true){el.classList.toggle('hidden',!s);}
function flash(text){levelBanner.textContent=text;show(levelBanner,true);setTimeout(()=>show(levelBanner,false),1000);}

function start(){score=0;caught=0;state=State.PLAYING;show(panelStart,false);show(panelPause,false);show(panelWin,false);flash('LEVEL 1');refreshHUD();}
function togglePause(){if(state===State.PLAYING){state=State.PAUSED;show(panelPause,true);}else if(state===State.PAUSED){state=State.PLAYING;show(panelPause,false);}}
function win(){state=State.WIN;show(panelWin,true);}
function restart(){start();}

document.getElementById('btnStart').onclick=start;
document.getElementById('btnPause').onclick=togglePause;
document.getElementById('btnResume').onclick=togglePause;
document.getElementById('btnRestart').onclick=restart;
document.getElementById('btnRestart2').onclick=restart;
document.getElementById('btnReplay').onclick=restart;
document.getElementById('btnNext').onclick=()=>{window.location.href='v2.html';};

// ÊâãÊ©ü Menu
document.getElementById('btnMore').onclick=()=>{
  const g=document.querySelector('.buttons');
  const vis=g.style.display==='flex';
  g.style.display=vis?'none':'flex';
  if(!vis)setTimeout(()=>g.style.display='none',3500);
};

// Á∞°ÂåñÈÅäÊà≤ÊïàÊûú
function loop(){
  requestAnimationFrame(loop);
  const w=canvas.clientWidth,h=canvas.clientHeight;
  ctx.clearRect(0,0,w,h);
  ctx.fillStyle='rgba(255,255,255,0.05)';
  ctx.fillRect(0,0,w,h);
  const bottom=h-40;
  ctx.fillStyle='#2b7cff';
  ctx.fillRect(bowl.x-bowl.w/2,bottom-bowl.h,bowl.w,bowl.h);
  if(state===State.READY){
    ctx.fillStyle='#fff';ctx.textAlign='center';ctx.font='bold 20px sans-serif';ctx.fillText('Tap ‚ñ∂ Start',w/2,h/2);
  } else if(state===State.PLAYING){
    score+=0.1;refreshHUD();
    if(score>=target){win();}
  }
}
requestAnimationFrame(loop);
</script>
</body>
</html>